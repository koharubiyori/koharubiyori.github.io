<!DOCTYPE html><html><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0"><meta name="baidu-site-verification" content="code-huaq5qAbeF"><title>åœ¨Reactä¸­æ„‰å¿«åœ°ä½¿ç”¨TypeScript - å°æ˜¥æ—¥å’Œã®ç§˜å¯†åŸºåœ°</title><meta name="description" content="ä»Šæ—¥ã¯ãƒãƒã¡ã‚ƒã‚“ã®èª•ç”Ÿæ—¥ã ï¼"><link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@mdi/font@5.8.55/css/materialdesignicons.min.css"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><link rel="stylesheet" href="/libs/normalize.css?timestamp=1709531293722"><link rel="stylesheet" href="/libs/flex.css?timestamp=1709531293722"><link rel="stylesheet" href="/libs/material-components-web.min.css?timestamp=1709531293722"><link rel="stylesheet" href="/libs/mdc.tooltip.min.css?timestamp=1709531293722"><link rel="stylesheet" href="/libs/prism.css?timestamp=1709531293722"><link rel="stylesheet" href="/libs/viewer.min.css?timestamp=1709531293722"><link rel="stylesheet" href="/styles/commons/index.css?timestamp=1709531293722"><link rel="stylesheet" href="/styles/templates/index.css?timestamp=1709531293722"><link rel="stylesheet" href="/styles/partial/index.css?timestamp=1709531293722"><link rel="stylesheet" href="/styles/layout.css?timestamp=1709531293722"><script src="/libs/jquery.min.js?timestamp=1709531293722"></script><script src="/libs/material-components-web.min.js?timestamp=1709531293722"></script><script src="/libs/mdc.tooltip.min.js?timestamp=1709531293722"></script><script src="/libs/prism.min.js?timestamp=1709531293722"></script><script src="/libs/viewer.min.js?timestamp=1709531293722"></script><script src="/scripts/uiRender.js?timestamp=1709531293722"></script><meta name="generator" content="Hexo 5.0.2"></head><body><img class="page-bgImg" src="/sourceImages/bg.png"><header class="mdc-top-app-bar mdc-top-app-bar--fixed mdc-elevation--z4"><div class="mdc-top-app-bar__row"><section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-start"><button id="drawerButton" class="material-icons mdc-top-app-bar__navigation-icon mdc-icon-button">menu</button> <a class="mdc-top-app-bar__title" href="/" style="color:#fff">å°æ˜¥æ—¥å’Œã®ç§˜å¯†åŸºåœ°</a></section><section class="mdc-top-app-bar__section mdc-top-app-bar__section--align-end"><button id="searchButton" class="material-icons mdc-top-app-bar__action-item mdc-icon-button">search</button></section></div></header><div class="mainContainer flex-row"><div class="page-drawer"><div class="drawer-placeholder"></div><aside class="mdc-drawer drawer-body mdc-elevation--z4"><div class="drawer-header flex-column flex-evenly"><div class="drawer-header--content flex-column flex-cross-center"><img class="drawer-avatar" src="/sourceImages/avatar.png"><div class="drawer-userName">å°æ˜¥æ—¥å’Œ</div><div class="drawer-totals flex-row flex-cross-center"><div class="flex flex-column flex-center"><div class="drawer-totals--label">æ–‡ç« </div><div class="drawer-totals--value">å…±14ç¯‡</div></div><div class="flex flex-column flex-center"><div class="drawer-totals--label">æ ‡ç­¾</div><div class="drawer-totals--value">å…±12ä¸ª</div></div><div class="flex flex-column flex-center" id="busuanzi_container_site_pv"><div class="drawer-totals--label" style="text-align:center">æ€»è®¿é—®</div><div class="drawer-totals--value" style="text-align:center"><span id="busuanzi_value_site_pv"></span><span>æ¬¡</span></div></div></div></div></div><div class="drawer-content"><div class="drawer-list"><a class="drawer-list-item flex-row flex-cross-center materialRipple materialRipple--dark com-pointer" href="/"><i class="list-item--icon material-icons">home</i><span class="list-item--title">é¦–é¡µ</span></a><a class="drawer-list-item flex-row flex-cross-center materialRipple materialRipple--dark com-pointer" href="/2020/08/24/æ—¥å¸¸/å†æ¬¡å¯ç¨‹"><i class="list-item--icon material-icons">info</i><span class="list-item--title">å…³äºåšå®¢ </span></a><a class="drawer-list-item flex-row flex-cross-center materialRipple materialRipple--dark com-pointer" target="_blank" rel="noopener" href="https://github.com/koharubiyori"><i class="mdi-set mdi-github" style="font-size:24px;color:var(--mdc-theme-primary);line-height:1.1"></i><span class="list-item--title">Github</span></a><a class="drawer-list-item flex-row flex-cross-center materialRipple materialRipple--dark com-pointer" target="_blank" rel="noopener" href="https://zh.moegirl.org.cn/User:%E6%9D%B1%E6%9D%B1%E5%90%9B"><strong style="font-size:18px;color:var(--mdc-theme-primary);margin-left:3px">èŒ</strong><span class="list-item--title">èŒå¨˜ç™¾ç§‘</span></a></div></div></aside></div><main class="mainContent flex"><div class="page-post"><link rel="stylesheet" href="/styles/post.css?timestamp=1709531293692"><div class="post-header"><h2 class="post-header--title">åœ¨Reactä¸­æ„‰å¿«åœ°ä½¿ç”¨TypeScript</h2><div class="post-header--row com-onlyDesktop"><div class="post-header--infoBox" style="background-color:#007fff"><i class="material-icons">watch_later</i><span>2020å¹´12æœˆ04æ—¥</span></div><div class="post-header--infoBox" style="background-color:#04b431"><i class="material-icons">menu_book</i><span>æ€»å­—æ•°ï¼š1.7k</span></div><div class="post-header--infoBox" style="background-color:#b40486"><i class="material-icons">access_alarm</i><span>é¢„è®¡é˜…è¯»æ—¶é—´ï¼š23åˆ†é’Ÿ</span></div></div><div class="post-header--row post-header--tags" style="justify-content:flex-start;margin-top:10px"><a class="post-header--tag" href="/tags/TypeScript/" title="æŸ¥çœ‹â€œTypeScriptâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>TypeScript</span></a><a class="post-header--tag" href="/tags/React/" title="æŸ¥çœ‹â€œReactâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>React</span></a></div></div><div class="post-body mdc-elevation--z2"><img class="post-body--headImg" src="https://bn1302files.storage.live.com/y4mOZ7DeQeJgfq9g2i4YLZoHw2e_M0HpUlNdFMgLuPqBYJdt6smcIqIXF6xKstXJzyH7BMJ9Zr8oqsW_3MQJ-TvKL0Qe6R5e3zdz8VghLWbuNpqWb7c_SCpHZW4dgyIrcm6Yqxo940O7xXtrkTsxfF-MEEdKJOLWnbHSkDku6HjUdUc5qE8W93uyDG3ZafR72UT?width=1024&amp;height=664&amp;cropmode=none" style="object-position:center 21%"><div class="post-body--content"><div class="contentContainer"><p>å›¾ç‰‡æ¥æºï¼š<a target="_blank" rel="noopener" href="https://www.pixiv.net/artworks/73737464">pixiv:ğŸ’’ ä½œè€…ï¼šã‚‚ããš</a></p><h2 id="å‰è¨€"><a href="#å‰è¨€" class="headerlink" title="å‰è¨€"></a>å‰è¨€</h2><p>åœ¨ç½‘ä¸Šçœ‹è¿‡ä¸€ä¸ªæ®µå­ï¼šâ€œä½¿ç”¨vueï¼Œå¾ˆå¥½ï¼›ä½¿ç”¨tsï¼Œéå¸¸å¥½ï¼›ä½¿ç”¨vue + tsï¼Œçˆ†ç‚¸â€ï¼Œè™½ç„¶è¿™ç¯‡æ–‡ç« çš„ä¸»è§’ä¸æ˜¯Vueï¼Œä½†è¿™ä¸ªæ®µå­ä¹Ÿè¶³ä»¥è¯´æ˜ä¸€ä¸ªé—®é¢˜ï¼štsåœ¨å’Œæ¡†æ¶ç»“åˆæ—¶ï¼Œä¼šé‡åˆ°ä¸€ç³»åˆ—çš„ç±»å‹é—®é¢˜ã€‚tsçš„ç±»å‹ç³»ç»Ÿæ˜¯ä¸ªç±»å‹é“¾ï¼Œä¸€æ—¦è¿™ä¸ªç±»å‹é“¾ä¸­æ–­äº†åç»­å°±ä¼šå¤±å»å¯¹ç±»å‹çš„çº¦æŸå’Œæç¤ºï¼Œvueåœ¨æ¨¡æ¿è¯­æ³•ä¸­ä½¿ç”¨äº†ä¸€äº›â€œé­”æœ¯â€è¯­æ³•ï¼Œå¯¼è‡´ç±»å‹ç³»ç»Ÿåœ¨æ•°æ®å’Œæ¨¡æ¿ä¹‹é—´å‡ºç°äº†æ–­å±‚ï¼Œè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆvueæ¨¡æ¿éš¾ä»¥å’Œtsç»“åˆä½¿ç”¨çš„åŸå› ã€‚ç›¸æ¯”ä¹‹ä¸‹Reactå› ä¸ºä½¿ç”¨äº†jsxè¯­æ³•ï¼Œæœ¬è´¨ä¸Šç­‰åŒäºjsè¯­å¥ï¼Œè¿™æ ·å°±ä½¿tså’Œreactè¾ƒå¥½åœ°ç»“åˆ(å®é™…ä¸Šè¿˜æ˜¯é tsä¸»åŠ¨é€‚é…çš„jsxè¯­æ³•)ï¼Œä½†æ˜¯åˆšå¼€å§‹ä¸€ä¸ªé¡¹ç›®æ—¶ï¼Œè¿˜æ˜¯ä¼šç¢°åˆ°ä¸€äº›éšœç¢ï¼Œè¿™é‡Œå°±æ€»ç»“ä¸€ä¸‹react + tsçš„å¸¸è§é—®é¢˜ã€‚</p><h2 id="ç»„ä»¶åŸºæœ¬propsç±»å‹åŠComponentæ³›å‹"><a href="#ç»„ä»¶åŸºæœ¬propsç±»å‹åŠComponentæ³›å‹" class="headerlink" title="ç»„ä»¶åŸºæœ¬propsç±»å‹åŠComponentæ³›å‹"></a>ç»„ä»¶åŸºæœ¬propsç±»å‹åŠComponentæ³›å‹</h2><p><code>React.Component</code>ä¸­æœ‰ä¸‰ä¸ªæ³›å‹ï¼š</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">type MyComponent &#x3D; React.Component&lt;Props, State, SnapShot&gt;</code></pre><ul><li><code>Props</code>ï¼šç»„ä»¶å‚æ•°ï¼Œæœ€å¸¸ç”¨çš„å°±æ˜¯è¿™ä¸ª</li><li><code>State</code>ï¼šç»„ä»¶çŠ¶æ€ï¼Œåœ¨ä¸€äº›é«˜é˜¶ç»„ä»¶å‘stateæ³¨å…¥æˆå‘˜æ—¶ä¼šç”¨åˆ°</li><li><code>SnapShot</code>ï¼šå¿«ç…§ç±»å‹ï¼Œä¹Ÿå°±æ˜¯å½“ä½¿ç”¨æœ‰è¿”å›å€¼çš„<code>getSnapshotBeforeUpdate</code>æ—¶<code>componentDidUpdate</code>æ¥åˆ°çš„ç¬¬ä¸‰ä¸ªå‚æ•°çš„ç±»å‹(å‚è§ï¼š<a target="_blank" rel="noopener" href="https://zh-hans.reactjs.org/docs/react-component.html#getsnapshotbeforeupdate">https://zh-hans.reactjs.org/docs/react-component.html#getsnapshotbeforeupdate</a>)</li></ul><p><strong>æ —å­ï¼š</strong></p><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx">import React, &#123; PropsWithChildren &#125; from &#39;react&#39;

&#x2F;&#x2F; ä¹Ÿå¯ä»¥å†™å…¨ArticleHeaderPropsï¼Œä½†ä¸ªäººæ„Ÿè§‰å¤ªé•¿ï¼Œè€Œä¸”éœ€è¦å¯¼å‡ºç»„ä»¶å‚æ•°ç±»å‹çš„æƒ…å†µä¸æ˜¯å¾ˆå¤š
&#x2F;&#x2F; è§£å†³å‘½åé‡å¤å¼•å…¥æ—¶ä¸ºPropsè®¾ç½®åˆ«åå³å¯
export interface Props &#123;
  title: string
&#125; 

&#x2F;&#x2F; å½“ç»„ä»¶ä½¿ç”¨äº†é«˜é˜¶ç»„ä»¶ï¼Œæ³¨å…¥äº†å…¶ä»–å±æ€§æ—¶ï¼Œéœ€è¦åœ¨è¿™é‡Œå°†å¯¼å‡ºçš„ç±»å‹æ”¾åœ¨è¿™é‡Œå’ŒPropsç»„æˆäº¤å‰ç±»å‹
&#x2F;&#x2F; è¿™æ ·æ‰èƒ½åœ¨ç»„ä»¶ä¸­æ­£å¸¸æç¤º
type FinalProps &#x3D; Props

&#x2F;&#x2F; PropsWithChildrenä¸ºpropså¸¦ä¸Šchildrenå±æ€§
class ArticleHeader extends React.Component&lt;PropWithChildren&lt;FinalProps&gt;&gt; &#123;
  constructor(props: PropWithChildren&lt;FinalProps&gt;) &#123;

  &#125;
&#125;

&#x2F;&#x2F; æœ€åéœ€è¦å†å¼ºåˆ¶æ–­è¨€ä¸ºPropsï¼Œå¦‚æœä¸è¿™æ ·åšï¼Œå½“å¤–éƒ¨ä½¿ç”¨æ—¶ï¼Œå°†æç¤ºéœ€è¦ä¼ å…¥é«˜é˜¶ç»„ä»¶ä¸­æ³¨å…¥çš„å±æ€§
&#x2F;&#x2F; è¿™é‡Œå»ºè®®å°è£…ä¸€ä¸ªæ‹¼æ¥æ‰€æœ‰é«˜é˜¶ç»„ä»¶çš„å‡½æ•°ï¼Œé¡ºä¾¿æä¾›ä¸€ä¸ªPropsçš„æ³›å‹
export default ArticleHeader as any as React.Component&lt;Props&gt;</code></pre><h2 id="è·¯ç”±å‚æ•°ç±»å‹"><a href="#è·¯ç”±å‚æ•°ç±»å‹" class="headerlink" title="è·¯ç”±å‚æ•°ç±»å‹"></a>è·¯ç”±å‚æ•°ç±»å‹</h2><p>å‡ ä¹æ‰€æœ‰reactåº”ç”¨éƒ½ä½¿ç”¨äº†è·¯ç”±ï¼Œè¦å°†ç±»å‹ç³»ç»Ÿå¸¦å…¥è·¯ç”±ä¸­å»ï¼Œé¦–å…ˆæ¯ä¸ªé¡µé¢ç»„ä»¶éƒ½è¦å¯¼å‡ºä¸€ä¸ªè·¯ç”±å‚æ•°çš„æ¥å£ï¼Œä¹‹åå†ç”±ä¸€ä¸ªç»Ÿä¸€çš„ç±»å‹æ–‡ä»¶æ±‡æ€»å¹¶å¯¼å‡ºä¸€ä¸ªè·¯ç”±å‚æ•°æ˜ å°„ç±»å‹ã€‚</p><pre class="line-numbers language-ts" data-language="ts"><code class="language-ts">&#x2F;* views&#x2F;article&#x2F;index.tsx *&#x2F;
export interface RouteParams &#123;
  articleId: number
&#125;

&#x2F;* views&#x2F;articleList&#x2F;index.tsx *&#x2F;
export interface RouteParams &#123;
  categoryId: number
&#125;

&#x2F;* routes&#x2F;index.ts *&#x2F;
import &#123; RouteParams as ArticlePageRP &#125; from &#39;&#x2F;views&#x2F;articlePage&#39;
import &#123; RouteParams as ArticleListRP &#125; from &#39;&#x2F;views&#x2F;articleListPage&#39;

&#x2F;&#x2F; æœ€ç»ˆå¯¼å‡ºçš„è·¯ç”±å‚æ•°æ˜ å°„ç±»å‹
export interface RouteParamMaps &#123;
  article: ArticlePageRP
  articleList: ArticleListRP
&#125;

export type RouteNames &#x3D; keyof RouteParamMaps

&#x2F;&#x2F; å°è£…å¯¼èˆªå™¨ï¼Œè€ƒè™‘åˆ°reactä¸­å¯¼èˆªå¤§å¤šéƒ½ç»è¿‡äº†äºŒæ¬¡å°è£…ï¼Œè¿™é‡Œåªæä¾›ä¸€ä¸ªç®€å•å®ç°çš„ç±»å‹è¡¨ç¤º(åŸºäºreact-router-dom@5)
&#x2F;&#x2F; ç›¸å½“äºæä¾›ä¸€ä¸ªæ€è·¯ï¼Œå…·ä½“è¯·æ ¹æ®ä½¿ç”¨çš„å¯¼èˆªå™¨å°è£…
&#x2F;* utils&#x2F;createRouter.ts *&#x2F;
type CreateRouter &#x3D; &lt;RouteParams&gt;(props: &#123; history: RouteChildrenProps[&#39;history&#39;] &#125;) &#x3D;&gt; MyRouter&lt;RouteParams&gt;

interface MyRouter&lt;RouteParams&gt; &#123;
  params: &#123;
    search: RouteParams
    state: RoutePrams
  &#125;

  search&lt;T extends RouteNames&gt;(path: T, params: RouteParamMaps[T], action?: &#39;push&#39; | &#39;replace&#39;)
  state&lt;T extends RouteNames&gt;(path: T, params: RouteParamMaps[T], action?: &#39;push&#39; | &#39;replace&#39;)
&#125;


&#x2F;&#x2F; ä½¿ç”¨
&#x2F;* views&#x2F;articleList.tsx *&#x2F;
import React from &#39;react&#39;
import &#123; RouteChildrenProps &#125; from &#39;react-router&#39;
import createRouter from &#39;&#x2F;utils&#x2F;createRouter&#39;

export interface RouteParams &#123;
  categoryId: number
&#125;

export interface Props &#123;&#125; 

type FinalProps &#x3D; Props &amp; RouteChildrenProps

class ArticleListPage extends React.Component&lt;FinalProps&gt; &#123;
  router &#x3D; createRouter&lt;RouteParams&gt;()

  constructor(props: FinalProps) &#123;
    &#x2F;&#x2F; paramsä¼šæœ‰ç±»å‹æç¤º
    console.log(router.params.search)

    &#x2F;&#x2F; å¯¹äºä¸åŒçš„è·¯ç”±ï¼Œå‚æ•°çš„æç¤ºä¹Ÿä¼šä¸åŒ
    router.search(&#39;article&#39;, &#123; articleId: 1 &#125;)
  &#125;
&#125;

export default ArticlePage</code></pre><h2 id="Refå¯¼å‡ºç±»å‹"><a href="#Refå¯¼å‡ºç±»å‹" class="headerlink" title="Refå¯¼å‡ºç±»å‹"></a>Refå¯¼å‡ºç±»å‹</h2><p>ä½¿ç”¨refæ—¶ç»å¸¸ä¼šæœ‰å¯¼å‡ºä¸€ä¸ªç»„ä»¶æ§åˆ¶å™¨çš„æƒ…å†µï¼Œä¸‹é¢æ˜¯æ —å­ï¼š</p><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx">&#x2F;* views&#x2F;article&#x2F;components&#x2F;header.tsx *&#x2F;
class ArticleHeader &#123; ... &#125;

&#x2F;* views&#x2F;article&#x2F;index.tsx *&#x2F;
class ArticlePage extends React.Component &#123;
  headerRef &#x3D; createRef&lt;ArticleHeader&gt;()
&#125;</code></pre><p>hookç»„ä»¶ç”±äºæ²¡æœ‰refï¼Œå°±éœ€è¦æ‰‹åŠ¨å¯¼å‡ºä¸€ä¸ªrefç±»å‹ã€‚</p><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx">import React, &#123;&#125; from &#39;react&#39;

export interface ArticleHeaderRef &#123;
  show(): void
  hide(): void
&#125;

export interface Props &#123;
  &#x2F;&#x2F; å®˜æ–¹æœ‰forwardRefç”¨äºç»™å‡½æ•°å¼ç»„ä»¶æ·»åŠ refï¼Œä½†ä¸çŸ¥ä¸ºä»€ä¹ˆä½¿ç”¨æ—¶ä¼šé­é‡ç±»å‹é”™è¯¯ï¼Œäºæ˜¯è¿™é‡Œæ‰‹åŠ¨å®šä¹‰äº†ä¸ªgetRefå±æ€§
  getRef?: MutableRefObject&lt;ArticleHeaderRef | undefined | null&gt;
&#125;

&#x2F;&#x2F; è¿™é‡Œçœç•¥æ‰FinalPropsäº†ï¼Œå®é™…åº”è¯¥æœ‰çš„

function ArticleHeader(props: Props) &#123;
  if (props.getRef) props.getRef.current &#x3D; &#123; show, hide &#125;

  show() &#123;&#125;
  hide() &#123;&#125;
&#125;

&#x2F;&#x2F; ä½¿ç”¨
const articleHeaderRef &#x3D; useRef&lt;ArticleHeaderRef | undefined | null&gt;() &#x2F;&#x2F; å‡½æ•°ç»„ä»¶
&#x2F;&#x2F; articleHeaderRef &#x3D; createRef&lt;ArticleHeaderRef | undefined | null&gt;() &#x2F;&#x2F; ç±»ç»„ä»¶

&#x2F;*
  è¿™é‡Œæœ‰ä¸ªå·æ‡’çš„æ–¹å¼ï¼Œä¸ºgetRefè®¾ç½®ï¼šMutableRefObject&lt;any&gt;ï¼Œ
  ä½¿ç”¨æ—¶ï¼šuseRef&lt;ArticleHeaderRef&gt;ï¼Œè¿™æ ·è™½ç„¶ç±»å‹æ£€æŸ¥æœ‰äº›å°ç‘•ç–µï¼Œä½†ä¸ç”¨å»å†™ç©ºå€¼çš„äº¤å‰ç±»å‹äº†
*&#x2F;</code></pre><h2 id="é«˜é˜¶ç»„ä»¶æ³¨å…¥ç±»å‹"><a href="#é«˜é˜¶ç»„ä»¶æ³¨å…¥ç±»å‹" class="headerlink" title="é«˜é˜¶ç»„ä»¶æ³¨å…¥ç±»å‹"></a>é«˜é˜¶ç»„ä»¶æ³¨å…¥ç±»å‹</h2><p>é«˜é˜¶ç»„ä»¶æ˜¯è·¨ç»„ä»¶å¤ç”¨é€»è¾‘çš„åˆ©å™¨ï¼Œå¯ä»¥çœ‹åšæ˜¯ä¸€ä¸ªè£…é¥°å™¨ã€‚</p><p>é¦–å…ˆé‡æ¸©ä¸¤ç‚¹çŸ¥è¯†ï¼š</p><ul><li>é«˜é˜¶ç»„ä»¶æ¥æ”¶ä¸€ä¸ªç»„ä»¶ï¼Œè¿”å›ä¸€ä¸ªæ–°ç»„ä»¶</li><li>è£…é¥°å™¨æ¨¡å¼è¦æ±‚ä¸èƒ½æ”¹å˜è¢«è£…é¥°è€…çš„æ¥å£</li></ul><p>æ˜ç¡®äº†è¿™ä¸¤ç‚¹ï¼Œå°±å¯ä»¥çŸ¥é“ï¼šè¦ä¸ºé«˜é˜¶ç»„ä»¶å®šä¹‰çš„ä¼ å…¥å‚æ•°ç±»å‹æ˜¯ä¸€ä¸ªè¿”å›ç»„ä»¶å®ä¾‹çš„ç±»ï¼Œè€Œä¸æ˜¯ç»„ä»¶å®ä¾‹ï¼›å…¶æ¬¡ï¼Œè¿”å›çš„ç±»å‹å°±æ˜¯ä¼ å…¥çš„ç±»å‹ï¼Œæ³¨å…¥åˆ°propsçš„å±æ€§è¦é€šè¿‡ä¸ºFinalPropsè¿½åŠ äº¤å‰ç±»å‹æ¥å®ç°ã€‚</p><p>è¯è¯´å½“åˆä¸ºäº†å®ç°è£…é¥°å™¨è‡ªåŠ¨æ·»åŠ æ³¨å…¥çš„propsç±»å‹ï¼Œè¯•äº†ä¸€å¤©æœ€åä¹Ÿæ²¡å®ç°ï¼Œæƒ³ä¸é€šä¸ºä»€ä¹ˆé«˜é˜¶ç»„ä»¶å·²ç»æ˜ç¡®å®šä¹‰äº†è¿”å›çš„ç±»å‹ç”¨äº†è£…é¥°å™¨ä¸ºä»€ä¹ˆè¿˜æ˜¯æ²¡è¿”å›æ–°çš„ç±»å‹ï¼Œåæ¥æ‰æƒ³æ˜ç™½è£…é¥°å™¨è¿™ä¸ªè®¾è®¡æ¨¡å¼æœ¬èº«å°±æ˜¯è¦æ±‚ä¸èƒ½æ”¹å˜æ¥å£ã€‚</p><pre class="line-numbers language-tsx" data-language="tsx"><code class="language-tsx">&#x2F;&#x2F; è¿™é‡Œæœ‰ä¸ªå°å‘ï¼Œå°±æ˜¯æˆ‘ä¸Šé¢ç¬¬ä¸€ç‚¹æåˆ°çš„ï¼Œtså¯ä»¥å°†ç±»ç›´æ¥å½“ç±»å‹ä½¿ç”¨ï¼Œè¿™ç§æƒ…å†µä»£è¡¨çš„æ˜¯ç±»å®ä¾‹ï¼Œè€Œä¸æ˜¯ç±»æœ¬èº«ï¼Œæ‰€ä»¥ä¸èƒ½ç”¨React.Component
type ReactComponentClass &#x3D; &#123; new(...args: any[]): React.Component &#125;

function userStoreHOC&lt;T extends ReactComponentClass&gt;(Component: T): T &#123;
  return function WrappedComponent(props: any) &#123;
    return (
      &lt;UserStoreContext.Consumer&gt;&#123;context &#x3D;&gt;
        &lt;Component &#123;...props&#125; userStore&#x3D;&#123;context&#125; &#x2F;&gt;
      &#125;&lt;&#x2F;UserStoreContext.Consumer&gt;
    )
  &#125;
&#125;

interface UserStoreProps &#123;
  $userStore: &#123;
    userName: string
    login(): void
    logout(): void
  &#125;
&#125;

&#x2F;&#x2F; ä½¿ç”¨
export interface Props &#123;&#125;

&#x2F;&#x2F; å‘FinalPropsè¿½åŠ äº¤å‰ç±»å‹
type FinalProps &#x3D; Props &amp; UserStoreProps

&#x2F;&#x2F; çœç•¥å…¶ä½™ä»£ç ...</code></pre><p>æš‚æ—¶å°±æ˜¯è¿™äº›ï¼Œæœªæ¥è¿˜å¯èƒ½ä¼šè¡¥å……ã€‚</p></div><div class="articleLicenses"><p>ç‰ˆæƒå£°æ˜ï¼šæœ¬æ–‡ä¸ºåŸåˆ›æ–‡ç« ï¼Œç‰ˆæƒå½’ å°æ˜¥æ—¥å’Œ æ‰€æœ‰</p><p style="word-break:break-all"><span>æ–‡ç« é“¾æ¥ï¼š</span><a id="articleLink" href="javascript:void()" aria-describedby="tooltip-copyArticleLink">https://koharubiyori.github.io/React/åœ¨Reactä¸­æ„‰å¿«åœ°ä½¿ç”¨TypeScript/</a></p><p><span>æ‰€æœ‰åŸåˆ›æ–‡ç« é‡‡ç”¨&nbsp;</span><a target="_blank" href="https://creativecommons.org/licenses/by-nc/4.0/deed.zh">ç½²å-éå•†ä¸šæ€§ä½¿ç”¨ 4.0 å›½é™… (CC BY-NC 4.0)</a></p><p>æ‚¨å¯ä»¥è‡ªç”±è½¬è½½å’Œä¿®æ”¹ï¼Œä½†å¿…é¡»ä¿è¯åœ¨æ˜¾è‘—ä½ç½®æ³¨æ˜æ–‡ç« æ¥æºï¼Œä¸”ä¸èƒ½ç”¨äºå•†ä¸šç›®çš„ã€‚</p><div id="tooltip-copyArticleLink" class="mdc-tooltip" role="tooltip" aria-hidden="true"><div class="mdc-tooltip__surface"><lorem>ç‚¹å‡»å¤åˆ¶é“¾æ¥</lorem></div></div></div></div></div><div class="prevNextArticle flex-row flex-between"><a class="nextArticle materialRipple materialRipple--dark mdc-elevation--z2 flex" href="/React/React classç»„ä»¶ä¸­å¤ç”¨çŠ¶æ€åŠç”Ÿå‘½å‘¨æœŸ/" title="React classç»„ä»¶ä¸­å¤ç”¨çŠ¶æ€åŠç”Ÿå‘½å‘¨æœŸ"><div class="label">ä¸Šä¸€ç¯‡</div><div class="title com-textLimit">React classç»„ä»¶ä¸­å¤ç”¨çŠ¶æ€åŠç”Ÿå‘½å‘¨æœŸ</div></a><a class="prevArticle materialRipple materialRipple--dark mdc-elevation--z2 flex" href="/Flutter/Flutterä¸­å®ç°å¸¦å¯åŠ¨å¤´éƒ¨çš„åˆ—è¡¨å¸ƒå±€/" title="Flutterä¸­å®ç°å¸¦å¯åŠ¨å¤´éƒ¨çš„åˆ—è¡¨å¸ƒå±€"><div class="label">ä¸‹ä¸€ç¯‡</div><div class="title com-textLimit">Flutterä¸­å®ç°å¸¦å¯åŠ¨å¤´éƒ¨çš„åˆ—è¡¨å¸ƒå±€</div></a></div><div id="post-comments"></div></div></main><div class="page-sidebar"><div class="sidebar-placeholder"></div><div class="sidebar-body mdc-elevation--z4"><div class="articleContents"><div class="articleContents-title">ç›®å½•</div></div><div class="katakoto"><div class="katakoto-title">åªè¨€ç‰‡è¯­</div><div class="katakoto-items"><div class="katakoto-item"><div class="katakoto-item--content">ç¬¬ä¸‰æ¬¡é‡å»ºåšå®¢ï¼Œå¸Œæœ›è¿™æ¬¡ä¸ä¼šæ²¡å†™å¤šå°‘ä¸œè¥¿å°±åˆå…³äº†...</div><div class="katakoto-item--date">â€”â€” 2020å¹´11æœˆ21æ—¥ 09:35</div></div><div class="katakoto-item"><div class="katakoto-item--content">å…¶å®æˆ‘å†™åšå®¢æ˜¯ä¸ºäº†å‘å›¾çš„...ãªã‚“ã¡ã‚ƒã£ã¦</div><div class="katakoto-item--date">â€”â€” 2020å¹´12æœˆ05æ—¥ 23:35</div></div><div class="katakoto-item"><div class="katakoto-item--content">å¸Œæœ›ä»¥åæ¯å¤©éƒ½èƒ½å¼€å¿ƒ...</div><div class="katakoto-item--date">â€”â€” 2020å¹´12æœˆ07æ—¥ 10:14</div></div><div class="katakoto-item"><div class="katakoto-item--content">å°‘æƒ³å¤šåšã€‚</div><div class="katakoto-item--date">â€”â€” 2022å¹´07æœˆ03æ—¥ 00:14</div></div></div></div><div class="tags"><div class="tags-title">å†…å®¹æ ‡ç­¾</div><a class="tags-item" href="/tags/Electron/" title="æŸ¥çœ‹â€œElectronâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>Electron</span></a><a class="tags-item" href="/tags/Flutter/" title="æŸ¥çœ‹â€œFlutterâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>Flutter</span></a><a class="tags-item" href="/tags/JavaScript/" title="æŸ¥çœ‹â€œJavaScriptâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>JavaScript</span></a><a class="tags-item" href="/tags/TypeScript/" title="æŸ¥çœ‹â€œTypeScriptâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>TypeScript</span></a><a class="tags-item" href="/tags/å‰ç«¯/" title="æŸ¥çœ‹â€œå‰ç«¯â€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>å‰ç«¯</span></a><a class="tags-item" href="/tags/React/" title="æŸ¥çœ‹â€œReactâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>React</span></a><a class="tags-item" href="/tags/Vue-js/" title="æŸ¥çœ‹â€œVue.jsâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>Vue.js</span></a><a class="tags-item" href="/tags/å‰ç«¯æŠ€æœ¯/" title="æŸ¥çœ‹â€œå‰ç«¯æŠ€æœ¯â€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>å‰ç«¯æŠ€æœ¯</span></a><a class="tags-item" href="/tags/Windows/" title="æŸ¥çœ‹â€œWindowsâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>Windows</span></a><a class="tags-item" href="/tags/å°ç¨‹åº/" title="æŸ¥çœ‹â€œå°ç¨‹åºâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>å°ç¨‹åº</span></a><a class="tags-item" href="/tags/Taro/" title="æŸ¥çœ‹â€œTaroâ€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>Taro</span></a><a class="tags-item" href="/tags/æ—¥å¸¸/" title="æŸ¥çœ‹â€œæ—¥å¸¸â€æ ‡ç­¾ä¸‹çš„æ–‡ç« "><i class="material-icons">local_offer</i><span>æ—¥å¸¸</span></a></div></div></div><div class="page-search"><div class="search-body"><div class="search-input-container flex-row flex-cross-center"><i class="material-icons">search</i><input class="search-input flex" placeholder="æœç´¢æ–‡ç« ..."></div><div class="search-result" data-dirty="false" data-emptyresult="false"></div></div></div></div><div class="backTopButton mdc-elevation--z4 flex-row flex-center is-hide materialRipple"><i class="material-icons">north</i></div></body></html>